<!doctype html><html lang=en-us data-theme><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer-when-downgrade"><title>How I wrote an application to help me write a screenplay - rickschubert.net blog</title><meta name=description content><link rel=icon type=image/x-icon href=https://rickschubert.net/blog/favicon.ico><link rel=apple-touch-icon-precomposed href=https://rickschubert.net/blog/favicon.png><link rel=stylesheet href=https://rickschubert.net/blog/css/style.min.ada65744b50c0c8e95fce70ffd6071f0d8830f31d28d4629c2a760b4cd8f97d1.css integrity><meta property="og:title" content="How I wrote an application to help me write a screenplay"><meta property="og:description" content="Programming and writing are my two passions, although in different measures depending on my life state. I started writing a screenplay a while back but progress stalled. At the same time, my drive to program had been flaring up so what would have been better than to program a tool that supports my writing ambitions!
Thus, the &ldquo;Scene Mover&rdquo; was born. This application allows me to compose a screenplay out of scenes: Instead of writing and adding scenes to one single document, this tool compiles a final script out of multiple files, one per scene."><meta property="og:type" content="article"><meta property="og:url" content="https://rickschubert.net/blog/posts/how-i-wrote-an-application-to-help-me-write-a-screenplay/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-28T19:34:34+01:00"><meta property="article:modified_time" content="2022-03-28T19:34:34+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How I wrote an application to help me write a screenplay"><meta name=twitter:description content="Programming and writing are my two passions, although in different measures depending on my life state. I started writing a screenplay a while back but progress stalled. At the same time, my drive to program had been flaring up so what would have been better than to program a tool that supports my writing ambitions!
Thus, the &ldquo;Scene Mover&rdquo; was born. This application allows me to compose a screenplay out of scenes: Instead of writing and adding scenes to one single document, this tool compiles a final script out of multiple files, one per scene."><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-252785X60E","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><a class=skip-main href=#main>Skip to main content</a><div class=container><header class=common-header><div class=site-header><a class=site-title href=https://rickschubert.net/blog/>rickschubert.net blog</a>
<button class=theme-switcher></button>
<script>const moonSVG=`<svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path></svg>`,sunSVG=`<svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>`,STORAGE_KEY="user-color-scheme",defaultTheme="auto";let currentTheme,switchButton,autoDefinedScheme=window.matchMedia("(prefers-color-scheme: dark)");const autoChangeScheme=e=>{currentTheme=e.matches?"dark":"light",document.documentElement.setAttribute("data-theme",currentTheme),changeButtonText()};document.addEventListener("DOMContentLoaded",function(){switchButton=document.querySelector(".theme-switcher"),currentTheme=detectCurrentScheme(),currentTheme=="dark"&&document.documentElement.setAttribute("data-theme","dark"),currentTheme=="auto"&&(autoChangeScheme(autoDefinedScheme),autoDefinedScheme.addListener(autoChangeScheme)),changeButtonText(),switchButton.addEventListener("click",switchTheme,!1)});function detectCurrentScheme(){return localStorage.getItem(STORAGE_KEY)?localStorage.getItem(STORAGE_KEY):defaultTheme?defaultTheme:window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"light"}function changeButtonText(){switchButton.innerHTML=currentTheme=="dark"?moonSVG:sunSVG}function switchTheme(){currentTheme=="dark"?(localStorage.setItem(STORAGE_KEY,"light"),document.documentElement.setAttribute("data-theme","light"),currentTheme="light"):(localStorage.setItem(STORAGE_KEY,"dark"),document.documentElement.setAttribute("data-theme","dark"),currentTheme="dark"),changeButtonText()}</script></div></header><main id=main tabindex=-1><article class=post><header class=post-header><h1 class=post-title>How I wrote an application to help me write a screenplay</h1></header><div class=content><div class=post-heroimage><img src=https://rickschubert.net/blog/images/scenemover-hero.png></div><p>Programming and writing are my two passions, although in different measures depending on my life state. I started writing a screenplay a while back but progress stalled. At the same time, my drive to program had been flaring up so what would have been better than to program a tool that supports my writing ambitions!</p><p>Thus, the &ldquo;Scene Mover&rdquo; was born. This application allows me to compose a screenplay out of scenes: Instead of writing and adding scenes to one single document, this tool compiles a final script out of multiple files, one per scene. Using drag and drop, I can reorder scenes which should help tremendously when writing my screenplay in a non-chronological order where I would want to concentrate on small chunks individually.</p><p>Using this tool, I can have a folder <code>/scenes</code> in my project which holds different files for different scenes. The extension assembles a full script out of the individual scenes and recompiles the script every time something changes in the directory, either because a scene is updated, a scene is added or because scenes are reordered using the drag and drop feature.</p><p>A short recording of the rearranging functionality:</p><img src=https://rickschubert.net/blog/images/scenemover_moving_scene_with_files_in_view.gif><h2 id=technical-implementation>Technical Implementation</h2><h3 id=backend>Backend</h3><p>My initial idea was to create a Visual Studio Code extension that would allow me to bring up a new tab right in my editor that shows the application. This idea arose because I use Visual Studio Code as my writing tool of choice along with the fantastic screenwriting extension <a href=https://github.com/piersdeseilligny/betterfountain>betterfountain</a> (to which I have also contributed a small number of features over the past years).</p><p>It was clear to me that I needed to render the app in Visual Studio Code using a <a href=https://code.visualstudio.com/api/extension-guides/webview>webview</a>. Webviews in VS Code can receive events from the outside as well as send events to the outside. On rearranging a scene using drag and drop, the webview could notify the rest of the extension that a scene has moved and it could then take care of rearranging the files.</p><p>But since visual studio code extensions are written in JavaScript/TypeScript, using this approach, I would have had to write code to assemble the final script and to move files in nodejs. Although JavaScript is a big love of mine, I wanted to write a lot of this application in Golang as I believe in its processing speed and as I find working with the language extremely satisfying and joyful. While I could have written several small CLI tools in Go that could then be started from within nodejs using child processes, I decided to create a local webserver instead. Although this decision forces users to always have a webserver running locally, it helped me tremendously with writing this tool as I am quite familiar with web apps and as it meant I could easily test the file moving and script reassembling functionalities. Additionally, it was clear to me from day one that this project would be specifically written just for myself - thus, anything goes.</p><p>Although I am calling this backend application a server, the program actually does a little bit more: aside from the webserver responsible for reordering scenes, the program also launches a file watcher that looks out for any changes to the <code>scenes/</code> directory and recompiles the full script. The webserver itself exposes two endpoints: <code>GET /scenes</code> which lists all of the scenes so that the web interface can display them, as well as <code>POST /scenes/transition</code> which is called by the web app to reorder scenes when the user reorders them using drag and drop.</p><p>For <code>POST /scenes/transition</code>, the user needs to supply a JSON body with two parameters: the name of the file that is about to be moved as well as the new position of the scene. Changing the position of an item in a slice might not seem like much, but I found it to be quite the challenge. What I ended up doing was what any respectable programmer would do: steal someone else&rsquo;s genius and reap the rewards! I discovered a JavaScript library that did exactly what I wanted, <a href=https://github.com/sindresorhus/array-move/blob/main/index.js>copied the algorithm</a> and translated it into Golang. Since Golang does not have an equivalent of <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice>JavaScript&rsquo;s splice method</a>, I also additionally stole - um, <em>relocated</em> - <a href=https://github.com/zzwx/splice>an implementation</a> of the <code>splice</code> method in Golang.</p><h3 id=frontend>Frontend</h3><p>As outlined previously, the original goal of the project was to spawn a webview from within VSCode. Thus, I did some research and noticed the existing VSCode extension <a href=https://github.com/iskenxan/sheepy-fp-guide>sheepy-fp-guilde</a> that spawns a React app within a webview. I used this extension as a starting point but tore out all of its pieces except for the foundations.</p><p>Choosing React was a no-brainer to me as I have extensive experience with it. But since I am not a frontend developer by profession, I find it usually quite the surprise coming back: every time I revisit the framework, new programming paradigms, toolchains and API methods come up; in my case most notably memoisation and Redux Toolkit. I found it equally challenging as well as rewarding to learn about these.</p><p>Aside from React, I use Redux to handle state changes and Sass to create my (minimal) stylesheets. The main chunk of the project is the drag and drop feature which is powered by <a href=https://react-dnd.github.io/react-dnd/about>React DnD</a>. Getting this to work was by far the biggest challenge of the entire project. The tutorial for React DnD is very detailed which caused me to lose focus. I ended up relying very little on the tutorial and instead experimented for a while with the various functionalities, fueled by spot-reading of the documentation. But alas, once the drag and drop worked&mldr; it was incredible! I jumped out of my chair, clenched my fists and proclaimed &ldquo;It works! It works!&rdquo;</p><h2 id=view-into-the-future-and-summary>View into the future and summary</h2><p>What helped me tremendously with this project was my mindset of imperfectionism. Instead of trying to create something impressive which could be used by others, I focused on getting things to work <em>for myself</em> using the tools I already know. Otherwise, I might not have been able to finish the project at all.</p><p>I know that there would be plenty of things to improve on this app, but that&rsquo;s the beauty - I don&rsquo;t care! For example, the app currently cannot be rendered in a Visual Studio Code webview, instead I need to open it in a browser. But despite this, it works and does what I wanted it to do; I am now able to rearrange scenes and write my screenplay in a more compositional manner. Therefore, I should focus on what I actually built this for: writing my screenplay!</p><hr><p><a href=https://github.com/rickschubert/scenemover-go-tools>Backend code for the project on GitHub</a></p><p><a href=https://github.com/rickschubert/scenemover-visual-studio-code-extension>Frotend code for the project on GitHub</a></p><p>Original screenplay image from <a href=https://www.rrfedu.com/blog/2016/09/26/screenwriting-101-read-screenplay/>rrfedu.com</a>, modified</p></div><div class=post-info><div class=post-date>28 March 2022</div><div class=post-taxonomies><ul class=post-tags><li><a href=https://rickschubert.net/blog/tags/programming>#programming</a></li></ul></div></div></article><div class="pagination post-pagination"><div class="left pagination-item disabled"></div><div class="right pagination-item"><a href=https://rickschubert.net/blog/posts/mock-inspect-contract-testing/>mock-inspect: A simple way to achieve contract testing</a></div></div></main><footer class=common-footer><a class=rss href=https://rickschubert.net/blog/index.xml><img src=https://rickschubert.net/blog/images/rss.svg> Subscribe to RSS feed</a><nav><a href=https://rickschubert.net/blog/posts/ title=Archive>Archive</a></nav><div class=common-footer-bottom><div class=copyright><p>© Rick Schubert, 2022<br></p></div></div></footer></div></body></html>